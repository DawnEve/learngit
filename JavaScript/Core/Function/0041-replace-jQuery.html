<meta charset='utf8'>
<h1>js正则之- ----replace， 第二个参数为function</h1>

<pre>
http://www.l99.com/EditText_view.action?textId=314912
</pre>

<script>
//tools
function n(s){console.log(s)}

var elem='<div class=book>some text</div><br/><p/><div/>';
//把不正确的但标签修正为双标签，比如：
/*
	<div/>修正为<div></div>
	<p/>修正为<p></p>
*/
elem = elem.replace(/(<(\w+)[^>]*?)\/>/g, function(all, front, tag){
	n( this )
	return tag.match(/^(abbr|br|col|img|input|link|meta|param|hr|area|embed)$/i) ?
		all :
		front + "></" + tag + ">";
});

n(elem);
</script>